# How to request ETH from MagicSpend++ protocol

This guide will show you how to request ETH from the MagicSpend++ contracts. You'll be asked to create a stake in the Base Sepolia network and then you can request ETH from the MagicSpend++ protocol on Mainnet Sepolia.

You can find the source code for this tutorial [here](https://github.com/pimlicolabs/tutorial-magic-spend).

## Steps

::::steps
### Define imports and create the clients

```ts
// [!include ~/snippets/magic-spend/index.ts:clients]
```

### Fetch MagicSpend contract addresses

```ts
// [!include ~/snippets/magic-spend/index.ts:pimlico_getMagicSpendContracts]
```

### Fetch stakes

```ts
// [!include ~/snippets/magic-spend/index.ts:pimlico_getMagicSpendStakes]
```

### Prepare the `Allowance` and sign it

```ts
// [!include ~/snippets/magic-spend/index.ts:pimlico_prepareMagicSpendAllowance]
```

### Grant the `Allowance` to Pimlico

```ts
// [!include ~/snippets/magic-spend/index.ts:pimlico_grantMagicSpendAllowance]
```

### Sponsor the `Withdrawal`

After the `Allowance` is granted, you can sponsor the `Withdrawal` to request ETH from the MagicSpend++ protocol. Notice how the request details (recipient, amount, etc) are covered with signature. The signature must be done by the `Allowance.signer`.

```ts
// [!include ~/snippets/magic-spend/index.ts:pimlico_sponsorMagicSpendWithdrawal]
```

### Execute the `Withdrawal`

```ts
// [!include ~/snippets/magic-spend/index.ts:execute]
```